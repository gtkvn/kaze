<turbo-frame id="update_password_form">
    <section>
        <header>
            <h2 class="text-lg font-medium text-gray-900 dark:text-gray-100">
                Update Password
            </h2>

            <p class="mt-1 text-sm text-gray-600 dark:text-gray-400">
                Ensure your account is using a long, random password to stay secure.
            </p>
        </header>

        <%= form_with model: @update_password_form, url: password_update_path, method: "put", class: "mt-6 space-y-6" do |update_password_form| %>
            <!-- Current Password -->
            <div>
                <%= render(InputLabelComponent.new({ for: "update_password_current_password", value: "Current Password" })) %>

                <%= render(TextInputComponent.new({ id: "update_password_current_password", class: "block mt-1 w-full", type: "password", name: "current_password", autocomplete: "current-password" })) %>

                <%= render(InputErrorComponent.new({ class: "mt-2", message: @update_password_form.error_messages[:current_password] })) %>
            </div>

            <!-- New Password -->
            <div>
                <%= render(InputLabelComponent.new({ for: "update_password_password", value: "New Password" })) %>

                <%= render(TextInputComponent.new({ id: "update_password_password", class: "block mt-1 w-full", type: "password", name: "password", autocomplete: "new-password" })) %>

                <%= render(InputErrorComponent.new({ class: "mt-2", message: @update_password_form.error_messages[:password] })) %>
            </div>

            <!-- Confirm Password -->
            <div class="mt-4">
                <%= render(InputLabelComponent.new({ for: "update_password_password_confirmation", value: "Confirm Password" })) %>

                <%= render(TextInputComponent.new({ id: "update_password_password_confirmation", class: "block mt-1 w-full", type: "password", name: "password_confirmation", autocomplete: "new-password" })) %>

                <%= render(InputErrorComponent.new({ class: "mt-2", message: @update_password_form.error_messages[:password_confirmation] })) %>
            </div>

            <div class="flex items-center gap-4">
                <%= render(PrimaryButtonComponent.new) do %>
                    Save
                <% end %>

                <% if flash[:status] == "password-updated" %>
                    <p
                        x-data="{ show: true }"
                        x-show="show"
                        x-transition
                        x-init="setTimeout(() => show = false, 2000)"
                        class="text-sm text-gray-600 dark:text-gray-400"
                    >Saved.</p>
                <% end %>
            </div>
        <% end %>
    </section>
</turbo-frame>
